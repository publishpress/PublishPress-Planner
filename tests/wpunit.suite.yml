# Codeception Test Suite Configuration
#
# Suite for unit or integration tests that require WordPress functions and classes.

actor: WpunitTester
modules:
  enabled:
    - WPLoader
    - \Helper\Wpunit
    - Asserts
    - WPDb
  config:
    WPLoader:
      wpRootFolder: "%WP_ROOT_FOLDER%"
      dbName: "%TEST_DB_NAME%"
      dbHost: "%TEST_DB_HOST%"
      dbUser: "%TEST_DB_USER%"
      dbPassword: "%TEST_DB_PASSWORD%"
      tablePrefix: "%TEST_TABLE_PREFIX%"
      domain: "%TEST_SITE_WP_DOMAIN%"
      adminEmail: "%TEST_SITE_ADMIN_EMAIL%"
      title: "WP Test"
      plugins: [ 'publishpress/publishpress.php' ]
      activatePlugins: [ 'publishpress/publishpress.php' ]
      isolatedInstall: true
    WPDb:
      dsn: '%TEST_SITE_DB_DSN%'
      user: '%TEST_SITE_DB_USER%'
      password: '%TEST_SITE_DB_PASSWORD%'
      dump: 'tests/_data/dump.sql'
      populate: true
      cleanup: false
      waitlock: 10
      url: '%TEST_SITE_WP_URL%'
      urlReplacement: true #replace the hardcoded dump URL with the one above
      tablePrefix: '%TEST_SITE_TABLE_PREFIX%'
      originalUrl: '%TEST_SITE_WP_URL%'
bootstrap: _bootstrap.php
