/*! For license information please see index.min.js.LICENSE.txt */
(()=>{"use strict";function e(e){var t;e.icon&&(t=React.createElement("span",{className:"dashicons dashicons-"+e.icon}));var a="publishpress-calendar-button "+(e.className||"");return React.createElement("a",{href:e.href||"#",className:a,onClick:e.onClick},t,e.label)}function t(t){return React.createElement("div",{className:"publishpress-calendar-navigation-bar"},React.createElement(e,{className:"refresh-button",icon:"update-alt",onClick:t.refreshOnClickCallback}),React.createElement(e,{label:"«",onClick:t.backPageOnClickCallback}),React.createElement(e,{label:"‹",onClick:t.backOnClickCallback}),React.createElement(e,{label:t.strings.today,onClick:t.todayOnClickCallback}),React.createElement(e,{label:"›",onClick:t.forwardOnClickCallback}),React.createElement(e,{label:"»",onClick:t.forwardPageOnClickCallback}))}function a(e){for(var t=[e.strings.weekDaySun,e.strings.weekDayMon,e.strings.weekDayTue,e.strings.weekDayWed,e.strings.weekDayThu,e.strings.weekDayFri,e.strings.weekDaySat],a=[],n=(e.weekStartsOnSunday?0:1)-1,r=0;r<7;r++)n++,6!==r||e.weekStartsOnSunday||(n=0),a.push({key:n.toString(),label:t[n]});return React.createElement(React.Fragment,null,a.map((function(e){return React.createElement("th",{key:e.key.toString()},e.label)})))}function n(e){var t=e.showSpinner||!1,a=e.message||"";return React.createElement("div",{className:"publishpress-calendar-message-bar"},t&&React.createElement("span",{className:"dashicons dashicons-update-alt publishpress-spinner"}),React.createElement("span",null,a))}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(){l=function(){return t};var e,t={},a=Object.prototype,n=a.hasOwnProperty,s=Object.defineProperty||function(e,t,a){e[t]=a.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function p(e,t,a){return Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,a){return e[t]=a}}function d(e,t,a,n){var r=t&&t.prototype instanceof y?t:y,l=Object.create(r.prototype),i=new T(n||[]);return s(l,"_invoke",{value:S(e,a,i)}),l}function m(e,t,a){try{return{type:"normal",arg:e.call(t,a)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var f="suspendedStart",h="suspendedYield",v="executing",g="completed",b={};function y(){}function E(){}function w(){}var k={};p(k,o,(function(){return this}));var C=Object.getPrototypeOf,_=C&&C(C(A([])));_&&_!==a&&n.call(_,o)&&(k=_);var R=w.prototype=y.prototype=Object.create(k);function x(e){["next","throw","return"].forEach((function(t){p(e,t,(function(e){return this._invoke(t,e)}))}))}function j(e,t){function a(l,s,i,o){var c=m(e[l],e,s);if("throw"!==c.type){var u=c.arg,p=u.value;return p&&"object"==r(p)&&n.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,i,o)}),(function(e){a("throw",e,i,o)})):t.resolve(p).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,o)}))}o(c.arg)}var l;s(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){a(e,n,t,r)}))}return l=l?l.then(r,r):r()}})}function S(t,a,n){var r=f;return function(l,s){if(r===v)throw Error("Generator is already running");if(r===g){if("throw"===l)throw s;return{value:e,done:!0}}for(n.method=l,n.arg=s;;){var i=n.delegate;if(i){var o=D(i,n);if(o){if(o===b)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=v;var c=m(t,a,n);if("normal"===c.type){if(r=n.done?g:h,c.arg===b)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=g,n.method="throw",n.arg=c.arg)}}}function D(t,a){var n=a.method,r=t.iterator[n];if(r===e)return a.delegate=null,"throw"===n&&t.iterator.return&&(a.method="return",a.arg=e,D(t,a),"throw"===a.method)||"return"!==n&&(a.method="throw",a.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var l=m(r,t.iterator,a.arg);if("throw"===l.type)return a.method="throw",a.arg=l.arg,a.delegate=null,b;var s=l.arg;return s?s.done?(a[t.resultName]=s.value,a.next=t.nextLoc,"return"!==a.method&&(a.method="next",a.arg=e),a.delegate=null,b):s:(a.method="throw",a.arg=new TypeError("iterator result is not an object"),a.delegate=null,b)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function A(t){if(t||""===t){var a=t[o];if(a)return a.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var l=-1,s=function a(){for(;++l<t.length;)if(n.call(t,l))return a.value=t[l],a.done=!1,a;return a.value=e,a.done=!0,a};return s.next=s}}throw new TypeError(r(t)+" is not iterable")}return E.prototype=w,s(R,"constructor",{value:w,configurable:!0}),s(w,"constructor",{value:E,configurable:!0}),E.displayName=p(w,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===E||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,p(e,u,"GeneratorFunction")),e.prototype=Object.create(R),e},t.awrap=function(e){return{__await:e}},x(j.prototype),p(j.prototype,c,(function(){return this})),t.AsyncIterator=j,t.async=function(e,a,n,r,l){void 0===l&&(l=Promise);var s=new j(d(e,a,n,r),l);return t.isGeneratorFunction(a)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},x(R),p(R,u,"Generator"),p(R,o,(function(){return this})),p(R,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),a=[];for(var n in t)a.push(n);return a.reverse(),function e(){for(;a.length;){var n=a.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(O),!t)for(var a in this)"t"===a.charAt(0)&&n.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var a=this;function r(n,r){return i.type="throw",i.arg=t,a.next=n,r&&(a.method="next",a.arg=e),!!r}for(var l=this.tryEntries.length-1;l>=0;--l){var s=this.tryEntries[l],i=s.completion;if("root"===s.tryLoc)return r("end");if(s.tryLoc<=this.prev){var o=n.call(s,"catchLoc"),c=n.call(s,"finallyLoc");if(o&&c){if(this.prev<s.catchLoc)return r(s.catchLoc,!0);if(this.prev<s.finallyLoc)return r(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return r(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return r(s.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var l=r;break}}l&&("break"===e||"continue"===e)&&l.tryLoc<=t&&t<=l.finallyLoc&&(l=null);var s=l?l.completion:{};return s.type=e,s.arg=t,l?(this.method="next",this.next=l.finallyLoc,b):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.finallyLoc===e)return this.complete(a.completion,a.afterLoc),O(a),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var a=this.tryEntries[t];if(a.tryLoc===e){var n=a.completion;if("throw"===n.type){var r=n.arg;O(a)}return r}}throw Error("illegal catch attempt")},delegateYield:function(t,a,n){return this.delegate={iterator:A(t),resultName:a,nextLoc:n},"next"===this.method&&(this.arg=e),b}},t}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t,a,n,r,l,s){try{var i=e[l](s),o=i.value}catch(e){return void a(e)}i.done?t(o):Promise.resolve(o).then(n,r)}function u(e){return function(){var t=this,a=arguments;return new Promise((function(n,r){var l=e.apply(t,a);function s(e){c(l,n,r,s,i,"next",e)}function i(e){c(l,n,r,s,i,"throw",e)}s(void 0)}))}}function p(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=new Date(e.getFullYear(),e.getMonth(),e.getDate()),n=(a.getDay(),new Date(a.getFullYear(),0,1)),r=t?n.getDay():(n.getDay()||7)-1,l=(a-n)/864e5,s=Math.floor((l+r)/7)+1;return[a.getFullYear(),s]}(e,t);return function(e,t){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=new Date(t,0,1+7*(e-1)),r=n.getDay(),l=n;return r<=4?l.setDate(n.getDate()-n.getDay()+1):l.setDate(n.getDate()+8-n.getDay()),a&&l.setDate(l.getDate()-1),l}(a[1],a[0],t)}function d(e){return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")}function m(e,t){var a=e.className?e.className:"";return e.url?React.createElement("a",{key:"link-".concat(e.url,"-").concat(e.label),href:e.url,className:a},e.label):e.action?React.createElement("a",{key:"link-".concat(e.url,"-").concat(e.label),className:a,onClick:function(a){return t(a,e)}},e.label):void 0}function f(e,t,a){return h.apply(this,arguments)}function h(){return(h=u(l().mark((function e(t,a,n){var r,s,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n+"?action="+t,e.t0=l().keys(a);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(s=e.t1.value,a.hasOwnProperty(s)){e.next=6;break}return e.abrupt("continue",2);case 6:r+="&"+s+"="+a[s],e.next=2;break;case 9:return e.next=11,fetch(r);case 11:return i=e.sent,e.next=14,i.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return(v=u(l().mark((function e(t,a,n,r){var s,i,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=n+"?action="+t,e.t0=l().keys(a);case 2:if((e.t1=e.t0()).done){e.next=9;break}if(i=e.t1.value,a.hasOwnProperty(i)){e.next=6;break}return e.abrupt("continue",2);case 6:s+="&"+i+"="+a[i],e.next=2;break;case 9:return e.next=11,fetch(s,{method:"post",body:r});case 11:return o=e.sent,e.next=14,o.json();case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return new Date(String(e).replace(/-/g,"/"))}function b(e,t){for(var a in t)t.hasOwnProperty(a)&&t[a].forEach((function(t){if(t.calendar_post_data&&Object.keys(t.calendar_post_data).length>0){var a=e.findIndex((function(e){return e.post_id===t.calendar_post_data.post_id})),n=i(i({},t.calendar_post_data),{},{taxonomies:i({},t.calendar_taxonomies_data)});a>-1?e[a]=n:e.push(n)}}));return e}function y(e){var t=publishpressCalendarParams.PostData,a=t.findIndex((function(t){return Number(t.post_id)===Number(e)}));if(-1===a)return console.error("Post with id "+e+" not found"),void console.log(t);var n=t[a],r=n.post_status,l=t[a-1]||t[t.length-1],s=t[a+1]||t[0],i=n.status_label,o=n.action_links,c=n.taxonomies||null,u=Number(n.can_edit_post)>0,p=jQuery(".publishpress-calendar .publishpress-calendar-item.post-"+e),d='<div class="pp-popup-modal-header">';l.post_id!=n.post_id&&(d+='<div class="pp-modal-navigation-prev">',d+='<a title="'+publishpressCalendarParams.strings.prev_label+'" href="#" class="modal-nav-prev" data-post_id="'+l.post_id+'"><span class="dashicons dashicons-arrow-left-alt"></span> '+l.filtered_title+"</a>",d+="</div>"),d+='<div class="pp-modal-navigation-current">',d+='<span class="modal-nav-current" style="color:'+p.css("background-color")+'"> '+n.filtered_title+"</span>",d+="</div>",s.post_id!=n.post_id&&(d+='<div class="pp-modal-navigation-next">',d+='<a title="'+publishpressCalendarParams.strings.next_label+'" href="#" class="modal-nav-next" data-post_id="'+s.post_id+'">'+s.filtered_title+' <span class="dashicons dashicons-arrow-right-alt"></span></a>',d+="</div>"),""!==o.edit&&(d+='<div class="meta post-edit"><span class="meta-title"><span><a href="'+o.edit+'">'+publishpressCalendarParams.strings.edit_label+"</a></span></span></div>"),""!==o.trash&&(d+='<div class="meta post-delete"><span class="meta-title"><span><a href="'+o.trash+'">'+publishpressCalendarParams.strings.delete_label+"</a></span></span></div>"),""!==o.previewpost?d+='<div class="meta post-preview"><span class="meta-title"><span><a href="'+o.previewpost+'">'+publishpressCalendarParams.strings.preview_label+"</a></span></span></div>":""!==o.view&&(d+='<div class="meta post-view"><span class="meta-title"><span><a href="'+o.view+'">'+publishpressCalendarParams.strings.view_label+"</a></span></span></div>"),d+="</div>";var m='<div class="pp-popup-modal-content">';if(m='<div class="modal-content-left">',m+='<div class="main-post-content">',m+=n.post_content,m+="</div>",m+="</div>",m+='<div class="modal-content-right">',m+='<div class="scrollable-content">',m+=u?'<div class="modal-post-title"><textarea class="title-area">'+n.raw_title+"</textarea></div>":'<div class="modal-post-title"><div>'+n.raw_title+"</div></div>",m+='<div class="modal-taxonomy-info post-date"><span class="info-item">'+publishpressCalendarParams.strings.post_date_label+'</span><span class="info-item">'+n.date_markup+"</span></div>",m+='<div class="modal-taxonomy-info post-author"><span class="info-item">'+publishpressCalendarParams.strings.post_author+'</span><span class="info-item">'+n.author_markup+"</span></div>",m+='<div class="modal-taxonomy-info post-modified"><span class="info-item">'+n.status_field_label+"</span>",m+='<span class="info-item">',u?(m+='<select class="pp-modal-form-post-status">',n.status_options.forEach((function(e){var t=e.value==r?"selected":"";m+='<option value="'+e.value+'" '+t+">"+e.text+"</option>"})),m+="</select>"):m+=i,m+="</span>",m+="</div>",null!==c){var f="";for(var h in c)if(c.hasOwnProperty(h)){var v=c[h];m+='<div class="modal-taxonomy-info">',m+='<span class="info-item">'+v.taxonomy_label+"</span>",u?(m+='<span class="info-item">',m+='<select class="pp-modal-form-post-taxonomy" data-placeholder="'+v.taxonomy_placeholder+'" data-taxonomy="'+v.taxonomy+'" multiple>',v.terms.length>0&&v.terms.forEach((function(e){m+='<option value="'+e.slug+'" selected>'+e.name+"</option>"})),m+="</select>",m+="</span>"):v.terms.length>0?(f=v.terms.map((function(e){return e.name})),m+='<span class="info-item">'+f.join(", ")+"</span>"):m+='<span class="description pp-modal-description">'+publishpressCalendarParams.strings.empty_term+"</span>",m+="</div>"}}m+="</div>",m+='<div class="fixed-footer">',m+='<div class="save-post-changes" data-post_id="'+n.post_id+'"><span class="spinner is-active"></span> '+publishpressCalendarParams.strings.update_label+"</div>",m+="</div>",m+="</div>",m+="</div>",jQuery("#pp-content-calendar-general-modal-container").html(m);var g=Math.round(.78*window.innerHeight);tb_show(d,"#TB_inline?width=600&height="+g+"&inlineId=pp-content-calendar-general-modal");var b=jQuery("body.pp-content-calendar-page #TB_window").css("height");if(b){var y=parseInt(b,10)-55;jQuery(".pp-content-calendar-general-modal-container .modal-content-right .scrollable-content").css("height",y-60+"px"),jQuery(".pp-content-calendar-general-modal-container .modal-content-left").css("height",y+"px"),jQuery("body.pp-content-calendar-page #TB_ajaxContent").css("height",y+"px");var w=jQuery(".pp-content-calendar-general-modal-container .modal-post-title .title-area");w.length>0&&E(!1,w)}jQuery(".pp-content-calendar-general-modal-container .modal-content-right .date-time-pick").each((function(){var e=jQuery(this),t=function(e,t){var a={dateFormat:publishpressCalendarParams.strings.date_format,firstDay:publishpressCalendarParams.strings.week_first_day},n=jQuery.extend({},a,{alwaysSetTime:!1,controlType:"select",altFieldTimeOnly:!1}),r=e.attr("data-alt-field");return r&&void 0!==r&&0!=r.length?jQuery.extend({},n,{altField:'input[name="'+r+'"]',altFormat:e.attr("data-alt-format")}):n}(e);e.hasClass("future-date")&&(t.minDate=new Date),e.datetimepicker(t)})),jQuery(".pp-modal-form-author").pp_select2({allowClear:!1,ajax:{url:ajaxurl,dataType:"json",delay:0,data:function(e){return{action:"publishpress_calendar_search_authors",nonce:publishpressCalendarParams.nonce,q:e.term}},processResults:function(e){return{results:e}},cache:!1}}),jQuery(".pp-modal-form-post-taxonomy").pp_select2({allowClear:!0,ajax:{url:ajaxurl,dataType:"json",delay:0,data:function(e){return{action:"publishpress_calendar_search_terms",taxonomy:jQuery(this).attr("data-taxonomy"),nonce:publishpressCalendarParams.nonce,q:e.term}},processResults:function(e){return{results:e}},cache:!1}}),jQuery(".pp-modal-form-post-status").pp_select2({allowClear:!1})}function E(e){return(t=arguments.length>1&&void 0!==arguments[1]&&arguments[1])||(t=jQuery(".pp-content-calendar-general-modal-container .modal-post-title .title-area")),t.css("height","auto"),void t.css("height",t[0].scrollHeight+"px");var t}function w(e){return e.isEditing?React.createElement("input",{type:"text",id:e.id,value:e.value,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):React.createElement("time",{dateTime:e.value,title:e.value,id:e.id},e.valueString||e.value)}var k=jQuery;function C(e){var t,a=React.useRef(null);React.useEffect((function(){var t={placeholder:e.placeholder||!1,tags:!0,allowClear:void 0===e.allowClear||null===e.allowClear||e.allowClear};return e.ajaxUrl&&e.ajaxAction&&(t.ajax={delay:250,url:e.ajaxUrl,dataType:"json",data:function(t){var a={q:t.term,action:e.ajaxAction,nonce:e.nonce};if(e.ajaxArgs)for(var n in e.ajaxArgs)e.ajaxArgs.hasOwnProperty(n)&&(a[n]=e.ajaxArgs[n]);return a},processResults:function(e){return{results:e}}}),k(a.current).pp_select2(t).on("select2:select",(function(t){"function"==typeof e.onSelect&&e.onSelect(t,a.current,k(a.current).pp_select2("data"))})).on("select2:clear",(function(t){"function"==typeof e.onClear&&e.onClear(t,a.current)})),function(){k(a.current).pp_select2("destroy")}}),[]),e.options&&(t=e.options.map((function(e){return React.createElement("option",{key:"select-option-".concat(e.value),value:e.value},e.text)})));var n="pp_select2";return e.className&&(n+=" "+e.className),n+=e.metadata?"pp-calendar-form-metafied "+e.post_types:"",React.createElement("select",{className:n,defaultValue:e.value,type:"select",name:e.name,id:e.id,multiple:e.multiple,ref:a},e.placeholder?React.createElement("option",{value:""},e.placeholder):React.createElement(React.Fragment,null),t)}function _(e){return e.isEditing?React.createElement(C,{ajaxUrl:e.ajaxUrl,nonce:e.nonce,multiple:e.multiple,ajaxAction:"publishpress_calendar_search_authors",ajaxArgs:e.ajaxArgs,value:e.value,metadata:e.metadata,post_types:e.post_types,className:e.metadata?"pp-calendar-form-metafied-input":"",name:e.name,id:e.id,onSelect:e.onSelect,onClear:e.onClear}):React.createElement("span",{id:e.id},e.value.join(", "))}function R(e){return e.isEditing?React.createElement("input",{type:"text",value:e.value}):React.createElement("span",null,e.value)}function x(e){return e.isEditing?React.createElement(C,{ajaxUrl:e.ajaxUrl,nonce:e.nonce,multiple:e.multiple,ajaxAction:e.ajaxAction,ajaxArgs:e.ajaxArgs,options:e.options,value:e.value,name:e.name,id:e.id,onSelect:e.onSelect,onClear:e.onClear}):React.createElement("span",{id:e.id},e.value)}function j(e){return e.isEditing?React.createElement(C,{options:e.options,id:e.id,value:e.value,allowClear:e.allowClear,onSelect:e.onSelect,onClear:e.onClear}):React.createElement("span",{id:e.id},e.value)}function S(e){return e.isEditing?React.createElement(C,{placeholder:e.placeholder,id:e.id,ajaxUrl:e.ajaxUrl,nonce:e.nonce,ajaxAction:"publishpress_calendar_search_terms",ajaxArgs:{taxonomy:e.taxonomy},options:e.options,value:e.value,multiple:e.multiple,onSelect:e.onSelect,onClear:e.onClear,className:e.className}):void 0===e.value||0===e.value.length?React.createElement("span",{id:e.id,className:"publishpress-calendar-empty-value"},publishpressCalendarParams.strings.noTerms):React.createElement("span",{id:e.id},e.value.join(", "))}function D(e){return e.isEditing?React.createElement("input",{type:"checkbox",id:e.id,value:"1",checked:"Yes"===e.value}):"Yes"===e.value?React.createElement("span",{id:e.id,className:"dashicons dashicons-yes-alt"}):React.createElement("span",{id:e.id,className:"dashicons dashicons-no-alt"})}function P(e){return e.isEditing?React.createElement("input",{type:"location",id:e.id,value:e.value,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):React.createElement("span",{id:e.id},e.value)}function O(e){var t=e.metadata?"pp-calendar-form-metafied-input pp-calendar-form-metafied "+e.post_types:"";return e.isEditing?React.createElement("div",{className:t},React.createElement("textarea",{id:e.id,metadata:e.metadata,post_types:e.post_types,name:e.name,className:t,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}},e.value)):React.createElement("div",{id:e.id},e.value)}function T(e){return e.isEditing?React.createElement("input",{type:"text",id:e.id,value:e.value,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):React.createElement("span",{id:e.id},e.value)}function A(e){return e.isEditing?React.createElement("input",{type:"text",id:e.id,value:e.value}):React.createElement("span",{id:e.id},e.value)}function N(e){var t;return e.isEditing?React.createElement("input",{type:"number",value:e.value,id:e.id,onChange:function(t){e.onChange&&e.onChange(t,t.target.value)}}):(t=0===e.value?"publishpress-calendar-empty-value":"",React.createElement("span",{id:e.id,className:t},e.value))}function I(e){return React.useEffect((function(){var t="#"+e.id,a=jQuery(t);a.length&&(a.attr("placeholder",e.placeholder||"HH:MM"),a.on("input",(function(e){var t=e.target.value.replace(/\D/g,"");if(1===t.length&&parseInt(t[0],10)>2)a.val("");else{t.length>=3&&(t=t.slice(0,2)+":"+t.slice(2,4)),a.val(t.slice(0,5));var n=t.split(":");if(n[0]){var r=n[0];if(2===r.length&&"2"===r[0]&&parseInt(r[1],10)>3)return void a.val(r[0])}if(n[1]){var l=n[1];if(1===l.length&&parseInt(l[0],10)>5)return void a.val(n[0]+":");2===l.length&&parseInt(l,10)>59&&a.val(n[0]+":"+l[0])}}})),a.on("change",(function(t){var n=a.val();/^([01][0-9]|2[0-3]):[0-5][0-9]$/.test(n)||(alert("Invalid time format. Please enter a time between 00:00 and 23:59."),a.val("")),e.onChange&&e.onChange(t,n)})))})),e.isEditing?React.createElement("input",{type:"text",id:e.id,placeholder:e.placeholder||null,value:e.value}):React.createElement("span",{id:e.id},e.value)}var F=jQuery;function L(e){if(!e.data)return React.createElement(React.Fragment,null);if(!e.target.current)return React.createElement(React.Fragment,null);var t=F(e.target.current).position(),a=F(e.target.current).offset(),n=F(e.target.current).width(),r=t.top,l=a.left+380+10+180>=F(document).width()?t.left-25-380:t.left+n+10,s=function(t,a){t.preventDefault(),f(a.action,a.args,e.ajaxUrl).then((function(t){e.onItemActionClickCallback(a.action,e.id,t)}))};return React.createElement("div",{className:"publishpress-calendar-popup",style:{top:r,left:l}},React.createElement("div",{className:"publishpress-calendar-popup-title",style:{backgroundColor:e.color}},e.icon&&React.createElement("span",{className:"dashicons "+e.icon+" publishpress-calendar-icon"}),React.createElement("span",{dangerouslySetInnerHTML:{__html:e.title}}),React.createElement("span",{className:"dashicons dashicons-no publishpress-calendar-popup-close",title:e.strings.close,onClick:function(){F(document).trigger("publishpress_calendar:close_popup")}})),React.createElement("table",null,React.createElement("tbody",null,function(){var t,a,n=[];for(var r in e.data.fields)if(e.data.fields.hasOwnProperty(r)){switch((t=e.data.fields[r]).type){case"date":a=React.createElement(w,{value:t.value,valueString:t.valueString||null,isEditing:!1});break;case"time":a=React.createElement(I,{value:t.value,isEditing:!1});break;case"authors":a=React.createElement(_,{value:t.value,isEditing:!1});break;case"select":a=React.createElement(x,{value:t.value,isEditing:!1});break;case"type":a=React.createElement(R,{value:t.value,isEditing:!1});break;case"status":a=React.createElement(j,{value:t.value,isEditing:!1});break;case"taxonomy":a=React.createElement(S,{value:t.value,isEditing:!1});break;case"checkbox":a=React.createElement(D,{value:t.value,isEditing:!1});break;case"location":a=React.createElement(P,{value:t.value,isEditing:!1});break;case"paragraph":a=React.createElement(O,{value:t.value,isEditing:!1});break;case"text":a=React.createElement(T,{value:t.value,isEditing:!1});break;case"user":a=React.createElement(A,{value:t.value,isEditing:!1});break;case"number":a=React.createElement(N,{value:t.value,isEditing:!1});break;default:a=null}n.push(React.createElement("tr",{key:"field-rows-popup-".concat(n.length)},React.createElement("th",null,t.label,":"),React.createElement("td",null,a)))}return n}())),React.createElement("hr",null),React.createElement("div",{className:"publishpress-calendar-popup-links"},function(){var t,a=[];for(var n in e.data.links)e.data.links.hasOwnProperty(n)&&((t=e.data.links[n]).url?a.push(React.createElement("a",{key:"links-popup-".concat(a.length),href:t.url},t.label)):t.action&&a.push(React.createElement("a",{key:"links-popup-".concat(a.length),onClick:function(e){return s(e,t)}},t.label)),a.push(React.createElement("span",{key:"links-popup-".concat(a.length)},"|")));return a.pop(),a}()))}var M=jQuery;function Q(e){var t,a,n=e.strings.untitled,r=React.useRef(null),l=e.showIcon&&e.icon?React.createElement("span",{className:"dashicons "+e.icon}," "):null,s=e.showTime?React.createElement("time",{className:"publishpress-calendar-item-time",dateTime:e.timestamp,title:e.timestamp},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ga",a=e.getHours();return"ga"===t||"ha"===t?0===a?a="12am":a<12?("ha"===t&&(a=a.toString().padStart(2,"0")),a+="am"):(a>12&&(a-=12),"ha"===t&&(a=a.toString().padStart(2,"0")),a+="pm"):a=a.toString().padStart(2,"0"),a}(g(e.timestamp),e.timeFormat||"g:i a")):null,i=e.label||n;return React.createElement("li",{ref:r,className:(t=e.id,a="publishpress-calendar-item post-"+t,e.isPopupOpened&&(a+=" publishpress-calendar-item-opened-popup"),e.canMove&&(a+=" publishpress-calendar-item-movable"),a),style:{backgroundColor:e.color},"data-index":e.index,"data-id":e.id,"data-datetime":e.timestamp,onClick:function(t){var a;a=t.target,M(a).hasClass("publishpress-calendar-popup")||M(a).parents(".publishpress-calendar-popup").length>0||e.onClickItemCallback(e.id)}},l,s,React.createElement("span",{className:"publishpress-calendar-item-title",dangerouslySetInnerHTML:{__html:i}}),e.isPopupOpened&&React.createElement(L,{target:r,id:e.id,title:i,icon:e.icon,timestamp:e.timestamp,color:e.color,data:e.isPopupOpened?e.getPopupItemDataCallback():null,onItemActionClickCallback:e.onItemActionClickCallback,ajaxUrl:e.ajaxUrl,strings:e.strings}))}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}function G(e){var t,a,n,r,l,s,i,o=(s=React.useState(!1),i=2,function(e){if(Array.isArray(e))return e}(s)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,s,i=[],o=!0,c=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=l.call(a)).done)&&(i.push(n.value),i.length!==t);o=!0);}catch(e){c=!0,r=e}finally{try{if(!o&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(c)throw r}}return i}}(s,i)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?U(e,t):void 0}}(s,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=o[0],u=o[1],p=0,d=function(){u(!c)},m=c||-1===e.maxVisibleItems?e.items:e.items.slice(0,e.maxVisibleItems);return React.createElement("td",{className:(n=e.date,r=e.todayDate,l=[1,2,3,4,5].indexOf(n.getDay())>=0?"business-day":"weekend-day",r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()&&r.getDate()===n.getDate()&&(l+=" publishpress-calendar-today"),e.isLoading&&(l+=" publishpress-calendar-loading"),c&&(l+=" publishpress-calendar-uncollapse"),1===n.getDate()&&(l+=" publishpress-calendar-first-day-of-month"),e.isHovering&&(l+=" publishpress-calendar-hovering"),"publishpress-calendar-"+l),"data-year":e.date.getFullYear(),"data-month":e.date.getMonth()+1,"data-day":e.date.getDate()},React.createElement("div",null,React.createElement("div",{className:"publishpress-calendar-cell-header"},e.shouldDisplayMonthName&&React.createElement("span",{className:"publishpress-calendar-month-name"},(t=e.date.getMonth(),[(a=publishpressCalendarParams.strings).monthJan,a.monthFeb,a.monthMar,a.monthApr,a.monthMay,a.monthJun,a.monthJul,a.monthAug,a.monthSep,a.monthOct,a.monthNov,a.monthDec][t])),React.createElement("span",{className:"publishpress-calendar-date"},e.date.getDate()),e.isHovering&&React.createElement("span",{className:"publishpress-calendar-cell-click-to-add"},e.strings.clickToAdd)),React.createElement("ul",{className:"publishpress-calendar-day-items"},m.map((function(t){var a=t.id===e.openedItemId;return React.createElement(Q,{key:"item-"+t.id+"-"+e.date.getTime(),icon:t.icon,color:t.color,label:t.label,id:t.id,timestamp:t.timestamp,timeFormat:e.timeFormat,showTime:t.showTime,showIcon:!0,index:p++,canMove:t.canEdit,isPopupOpened:a,getPopupItemDataCallback:e.getOpenedItemDataCallback,onClickItemCallback:e.onClickItemCallback,onItemActionClickCallback:e.onItemActionClickCallback,ajaxUrl:e.ajaxUrl,strings:e.strings})}))),function(){if(-1===e.maxVisibleItems)return React.createElement(React.Fragment,null);if(e.items.length>e.maxVisibleItems){var t=e.items.length-e.maxVisibleItems,a=e.strings.hideItems,n=e.strings.showMore,r=c?a.replace("%s",t):n.replace("%s",t),l=c?"publishpress-calendar-hide-items":"publishpress-calendar-show-more",s=c?"hidden":"visibility";return React.createElement("a",{className:l,onClick:d},React.createElement("span",{className:"dashicons dashicons-"+s})," ",r)}return React.createElement(React.Fragment,null)}()))}wp.i18n._n;var H=jQuery;function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,s,i=[],o=!0,c=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=l.call(a)).done)&&(i.push(n.value),i.length!==t);o=!0);}catch(e){c=!0,r=e}finally{try{if(!o&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(c)throw r}}return i}}(e,t)||Y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return V(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var W=jQuery;function B(e){var t=q(React.useState(e.postTypes[0].value),2),a=t[0],n=t[1],r=q(React.useState([]),2),l=r[0],s=r[1],i=q(React.useState(!1),2),o=i[0],c=i[1],u=q(React.useState(!1),2),p=u[0],h=u[1],g=q(React.useState(),2),b=g[0],y=g[1],E=function(){k(),F()},k=function(){W("#wpwrap").css("overflow","auto")},R=function(e){return void 0===window.publishpressCalendarGlobalData&&(window.publishpressCalendarGlobalData={}),void 0===window.publishpressCalendarGlobalData.formFieldsData&&(window.publishpressCalendarGlobalData.formFieldsData={}),window.publishpressCalendarGlobalData.formFieldsData.hasOwnProperty(e)?window.publishpressCalendarGlobalData.formFieldsData[e]:null},F=function(){void 0!==window.publishpressCalendarGlobalData&&void 0!==window.publishpressCalendarGlobalData.formFieldsData&&(window.publishpressCalendarGlobalData.formFieldsData=[])},L=function(e,t){!function(e,t){R(e),window.publishpressCalendarGlobalData.formFieldsData[e]=t}(e,t)},M=function(t,a){t.preventDefault(),c(!0),h(a.id),y(null),function(e,t,a,n){return v.apply(this,arguments)}(a.action,a.args,e.ajaxUrl,function(){var t=new FormData;for(var a in t.append("date",d(e.date)),t.append("nonce",e.nonce),window.publishpressCalendarGlobalData.formFieldsData)window.publishpressCalendarGlobalData.formFieldsData.hasOwnProperty(a)&&t.append(a,window.publishpressCalendarGlobalData.formFieldsData[a]);var n="",r="",l="",s=!1;return document.querySelectorAll(".pp-calendar-form-metafied-input").forEach((function(e){if(n=e.getAttribute("name"),l=e.getAttribute("type"),r=e.value,s=!1,"checkbox"!==l||e.checked||(s=!0),e.classList.contains("pp_editorial_meta_multi_select2")){s=!0;var a=e.selectedOptions,i="";for(i in a)a.hasOwnProperty(i)&&t.append(n,a[i].value)}s||t.append(n,r)})),t}()).then((function(t){"create"===a.id?(c(!1),h(null),"success"===t.status?e.onCloseCallback&&e.onCloseCallback():y(t.message)):"edit"===a.id&&("success"===t.status?window.location.href=t.data.link:(c(!1),h(null),y(t.message)))}))};React.useEffect((function(){return F(),n(e.postTypes[0].value),L("post_type",e.postTypes[0].value),L("status","draft"),W("#wpwrap").css("overflow","hidden"),E}),[]),React.useEffect((function(){c(!0);var t={nonce:e.nonce,postType:R("post_type"),date:d(e.date)};s(null),f(e.actionGetPostTypeFields,t,e.ajaxUrl).then((function(e){s(e.fields)})).then((function(){setTimeout((function(){W(".publishpress-calendar-popup-form input").first().focus()}),500),c(!1)}))}),[a]);var Q=function(){var t,a,n,r,s=[],i=function(i){if(!l.hasOwnProperty(i))return 1;switch(n="publishpress-calendar-field-"+i,t=l[i],r=t.placeholder?t.placeholder:null,t.type){case"date":a=React.createElement(w,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){L(i,t)}});break;case"authors":a=React.createElement(_,{value:t.value,isEditing:!0,name:i,id:n,nonce:e.nonce,ajaxUrl:e.ajaxUrl,ajaxArgs:t.ajaxArgs,metadata:!!t.metadata,post_types:t.post_types?t.post_types:"",multiple:t.metadata?t.multiple:e.allowAddingMultipleAuthors,onSelect:function(e,t,a){for(var n=[],r=0;r<a.length;r++)n.push(a[r].id);L(i,n)},onClear:function(e,t){L(i,null)}});break;case"select":a=React.createElement(x,{value:t.value,isEditing:!0,name:i,id:n,nonce:e.nonce,ajaxUrl:e.ajaxUrl,ajaxAction:t.ajaxAction,ajaxArgs:t.ajaxArgs,multiple:t.multiple,onSelect:function(e,t,a){for(var n=[],r=0;r<a.length;r++)n.push(a[r].id);L(i,n)},onClear:function(e,t){L(i,null)}});break;case"status":a=React.createElement(j,{value:t.value,isEditing:!0,id:n,options:t.options,onSelect:function(e,t,a){var n=null;a.length>0&&(n=a[0].id),L(i,n)},onClear:function(e,t){L(i,null)}});break;case"taxonomy":a=React.createElement(S,{value:t.value,isEditing:!0,id:n,taxonomy:t.taxonomy,nonce:e.nonce,ajaxUrl:e.ajaxUrl,multiple:!0,onSelect:function(e,t,a){for(var n=[],r=0;r<a.length;r++)n.push(a[r].id);L(i,n)},onClear:function(e,t){L(i,null)}});break;case"checkbox":a=React.createElement(D,{isEditing:!0,id:n,value:t.value});break;case"location":a=React.createElement(P,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){L(i,t)}});break;case"html":a=React.createElement(O,{value:t.value,name:i,metadata:!!t.metadata,post_types:t.post_types?t.post_types:"",isEditing:!0,id:n,onChange:function(e,t){L(i,t)}});break;case"text":a=React.createElement(T,{value:t.value,isEditing:!0,id:n,placeholder:r,onChange:function(e,t){L(i,t)}});break;case"user":a=React.createElement(A,{value:t.value,isEditing:!0,id:n});break;case"number":a=React.createElement(N,{value:t.value,isEditing:!0,id:n,onChange:function(e,t){L(i,t)}});break;case"time":a=React.createElement(I,{value:t.value,isEditing:!0,id:n,placeholder:r,onChange:function(e,t){L(i,t)}});break;case"metafield":t.isEditing=!0,a=function(e){return e.isEditing?(H(".pp_editorial_single_select2").length>0&&H(".pp_editorial_single_select2").pp_select2({allowClear:!0,placeholder:function(){H(this).data("placeholder")}}),H(".pp_editorial_meta_multi_select2").length>0&&H(".pp_editorial_meta_multi_select2").pp_select2({multiple:!0}),H(".date-time-pick").each((function(){var e=H(this),t=function(e,t){var a=H.extend({},{},{alwaysSetTime:!1,controlType:"select",altFieldTimeOnly:!1}),n=e.attr("data-alt-field");return n&&void 0!==n&&0!=n.length?H.extend({},a,{altField:'input[name="'+n+'"]',altFormat:e.attr("data-alt-format")}):a}(e);e.datetimepicker(t)})),React.createElement("div",{dangerouslySetInnerHTML:{__html:e.html}})):React.createElement("span",{id:e.id},e.value)}(t);break;default:a=null}s.push(React.createElement("tr",{key:"field-rows-".concat(s.length)},React.createElement("th",null,React.createElement("label",{htmlFor:n},t.label,":")),React.createElement("td",null,a)))};for(var o in l)i(o);return s}();return React.createElement(React.Fragment,null,React.createElement("div",{className:"publishpress-calendar-popup-screen-lock"}),React.createElement("div",{className:"publishpress-calendar-popup publishpress-calendar-popup-form"},React.createElement("div",{className:"publishpress-calendar-popup-title"},e.postId?"":e.strings.addContentFor.replace("%s",date_i18n(e.dateFormat,e.date)),React.createElement("span",{className:"dashicons dashicons-no publishpress-calendar-popup-close",title:e.strings.close,onClick:e.onCloseCallback})),React.createElement("hr",null),React.createElement("table",null,React.createElement("tbody",null,e.postTypes.length>1&&React.createElement("tr",null,React.createElement("th",null,React.createElement("label",null,e.strings.postType)),React.createElement("td",null,React.createElement(C,{options:e.postTypes,allowClear:!1,onSelect:function(e){var t=W(e.target).pp_select2("data")[0].id;n(t),L("post_type",t)}}))),1===e.postTypes.length&&React.createElement("tr",null,React.createElement("th",null,React.createElement("label",null,e.strings.postType)),React.createElement("td",null,function(t){var a,n=function(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=Y(e))){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,s=!0,i=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){i=!0,l=e},f:function(){try{s||null==a.return||a.return()}finally{if(i)throw l}}}}(e.postTypes);try{for(n.s();!(a=n.n()).done;){var r=a.value;if(r.value===t)return r.text}}catch(e){n.e(e)}finally{n.f()}return e.strings.postTypeNotFound}(a))),Q.length>0&&Q)),0===Q.length&&React.createElement("div",{className:"publishpress-calendar-popup-loading-fields"},e.strings.pleaseWaitLoadingFormFields),b&&React.createElement("div",{className:"publishpress-calendar-popup-error-message"},React.createElement("span",{className:"dashicons dashicons-warning"}),b),React.createElement("hr",{className:"publishpress-calendar-popup-links-hr"}),React.createElement("div",{className:"publishpress-calendar-popup-links"},function(){var t,a=[{id:"create",className:"button-primary calendar-create-btn",label:e.strings.save,labelLoading:e.strings.saving,action:"publishpress_calendar_create_item"},{id:"edit",className:"button-secondary calendar-edit-btn",label:e.strings.saveAndEdit,labelLoading:e.strings.saving,action:"publishpress_calendar_create_item"}],n=[];for(var r in a)a.hasOwnProperty(r)&&(t=a[r],p===t.id?n.push(React.createElement("span",{key:t.id},t.labelLoading)):n.push(m(t,M)),n.push(React.createElement("span",{key:"link-separator-".concat(n.length)})));return n.pop(),n}(),o&&React.createElement("span",{className:"dashicons dashicons-update-alt publishpress-spinner"}))))}function $(e){return $="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$(e)}function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function J(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){K(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function K(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,"string");if("object"!=$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==$(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,l,s,i=[],o=!0,c=!1;try{if(l=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(n=l.call(a)).done)&&(i.push(n.value),i.length!==t);o=!0);}catch(e){c=!0,r=e}finally{try{if(!o&&null!=a.return&&(s=a.return(),Object(s)!==s))return}finally{if(c)throw r}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Z(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=Array(t);a<t;a++)n[a]=e[a];return n}var ee=jQuery;function te(e){var r=e.theme||"light",l=e.requestFilter.weeks?e.requestFilter.weeks:e.numberOfWeeksToDisplay,s=e.requestFilter?e.requestFilter:{},i=X(React.useState(e.firstDateToDisplay),2),o=i[0],c=i[1],u=X(React.useState(l),2),m=u[0],f=u[1],h=X(React.useState(e.items),2),v=h[0],w=h[1],k=X(React.useState(!1),2),C=k[0],_=k[1],R=X(React.useState(!1),2),x=R[0],j=R[1],S=X(React.useState(),2),D=S[0],P=S[1],O=X(React.useState(l),2),T=O[0],A=O[1],N=X(React.useState(""),2),I=N[0],F=N[1],L=X(React.useState(),2),M=L[0],Q=L[1],U=X(React.useState([]),2),H=U[0],q=U[1],Y=X(React.useState(0),2),V=Y[0],W=Y[1],$=X(React.useState(0),2),z=$[0],Z=$[1],te=X(React.useState(),2),ae=te[0],ne=te[1],re=X(React.useState(),2),le=re[0],se=re[1],ie=X(React.useState(s),2),oe=ie[0],ce=ie[1],ue="publishpress-calendar-day-hover",pe=function(t,a){return a||(a=""),e.ajaxUrl+"?action="+t+"&nonce="+e.nonce+a},de=function(e){var t=e.target,a=t.name,n=t.value,r=t.closest(".content-calendar-modal"),l=r.previousElementSibling;if(n&&""!=n){var s=t.selectedOptions[0].text;l.classList.add("active-filter"),l.innerHTML=l.getAttribute("data-label")+": "+s,r.style.display="none"}else l.classList.remove("active-filter"),l.innerHTML=l.getAttribute("data-label");je(a,n)},me=function(e){e.preventDefault(),y(e.currentTarget.getAttribute("data-post_id"))},fe=function(e){var t="";e.target.classList.contains("active-filter")?(t=0,e.target.classList.remove("active-filter")):(t=1,e.target.classList.add("active-filter")),je("me_mode",t),document.querySelector("#filter_author").value="",document.querySelector("#pp-content-filters #content_calendar_me_mode").value=t},he=function(e){e.preventDefault();var t="";e.target.classList.contains("active-filter")?(t=1,e.target.classList.remove("active-filter")):(t=0,e.target.classList.add("active-filter")),je("hide_revision",t),document.querySelector("#pp-content-filters #pp_hide_revision_input").value=t},ve=function(e){var t=e.target.closest(".search-bar").querySelector("#co-searchbox-search-input").value;F(t)},ge=function(e){e.preventDefault();var t=e.target.closest(".content-calendar-modal"),a=t.previousElementSibling,n=t.querySelectorAll('input:not([type="submit"]), select, textarea'),r=[],l="";n.forEach((function(e){var t=e.name,a=e.value;"checkbox"===e.type?(a=e.checked?"1":"",l+=a):"select-one"===e.type?l+=" : "+e.selectedOptions[0].text:"hidden"!==e.type&&a&&""!==a&&(l+=" : "+a),r.push(t),je(t,a)})),l&&""!=l?(a.classList.add("active-filter"),a.innerHTML=a.getAttribute("data-label")+l):(a.classList.remove("active-filter"),a.innerHTML=a.getAttribute("data-label")),t.style.display="none"},be=function(){document.removeEventListener("keydown",Oe),ee(".publishpress-calendar tbody > tr > td").off("mouseenter")},ye=function(){ee("."+ue).removeClass(ue),ee(".publishpress-calendar-loading").removeClass("publishpress-calendar-loading")},Ee=function(e){c(new Date(o.getTime()+7*e*24*60*60*1e3))},we=function(e){e.preventDefault(),Z((function(e){return e+1}))},ke=function(t,a){var n=ee(t.target),r=ee(a.draggable[0]),l=d(g(r.data("datetime")));ee(t.target).addClass("publishpress-calendar-loading"),function(t,a,n,r,l){if(v[t]){var s=v[t][a];_(!0),P(e.strings.movingTheItem);var i=pe(e.actionMoveItem),o=new FormData;o.append("id",s.id),o.append("year",n),o.append("month",r),o.append("day",l),fetch(i,{method:"POST",body:o}).then((function(e){return e.json()})).then((function(){Z(z+1)}))}}(l,r.data("index"),n.data("year"),n.data("month"),n.data("day"))},Ce=function(e,t){ye(),ee(e.target).addClass(ue)},_e=function(e){var t=ee(e);return t.is("td.publishpress-calendar-business-day, td.publishpress-calendar-weekend-day")?t:t.is(".publishpress-calendar-cell-header, .publishpress-calendar-date, .publishpress-calendar-cell-click-to-add, .publishpress-calendar-month-name")?t.parents("td"):null},Re=function(e){var t=g(e.data("year")+"-"+e.data("month")+"-"+e.data("day"));return t.getHours()>0&&t.setTime(t.getTime()+6e4*t.getTimezoneOffset()),t},xe=function(){var e;ee(".publishpress-calendar tbody > tr > td").on("mouseover",(function(t){t.preventDefault(),t.stopPropagation();var a=_e(t.target);if(a){if(function(e){return ee(e).hasClass(ue)}(a))return;ne(Re(a)),e=Re(a)}})).on("mouseout",(function(t){t.stopPropagation(),t.preventDefault(),_e(t.relatedTarget)||(ne(null),e=null)})).on("click",(function(t){_e(t.target)&&(Q(null),se(e))}))},je=function(t,a){ce((function(e){return J(J({},e),{},K({},t,a))})),"weeks"===t&&((0===(a=parseInt(a))||isNaN(a))&&(a=e.numberOfWeeksToDisplay),A(a),f(a))},Se=function(){Q(null),q(null),se(null)},De=function(e){q(null),ne(null),se(null),Q(e),publishpressCalendarParams.proActive&&y(e)},Pe=function(e,t,a){W(V+1)},Oe=function(e){"Escape"===e.key&&Se()},Te=function(){return H},Ae=function(){Q(null)};React.useEffect((function(){return document.addEventListener("keydown",Oe),ee(document).on("publishpress_calendar:close_popup",Ae),ee(document).on("change","#pp-content-filters select:not(.non-trigger-select)",de),ee(document).on("click",".metadata-item-filter .filter-apply input[type=submit]",ge),ee(document).on("click",".pp-content-calendar-manage .search-bar input[type=submit]",ve),ee(document).on("click",".pp-content-calendar-manage .me-mode-action",fe),ee(document).on("click",".pp-content-calendar-manage .pp-show-revision-btn",he),ee(document).on("click",".pp-popup-modal-header .modal-nav-prev, .pp-popup-modal-header .modal-nav-next",me),ee(document).on("input",".pp-content-calendar-general-modal-container .modal-post-title .title-area",E),ee(document).on("click",".pp-content-calendar-general-modal-container .modal-content-right .save-post-changes:not(.disabled)",(function(e){!function(e,t,a){e.preventDefault();var n=t.closest(".modal-content-right");t.addClass("disabled");var r=t.attr("data-post_id"),l=n.find(".title-area").val(),s=n.find(".content_board_post_date_hidden").val(),i=n.find(".pp-modal-form-author").val(),o=n.find(".pp-modal-form-post-status").val(),c={};n.find(".pp-modal-form-post-taxonomy").each((function(){var e=jQuery(this);c[e.attr("data-taxonomy")]=e.val()}));var u={action:"publishpress_content_calendar_update_post",post_id:r,post_title:l,post_date:s,post_author:i,post_status:o,post_taxonomies:c,nonce:publishpressCalendarParams.nonce};jQuery.post(ajaxurl,u,(function(n){if("success"==n.status){var s=publishpressCalendarParams.PostData,i=jQuery(".publishpress-calendar .publishpress-calendar-item.post-"+r),c=s.findIndex((function(e){return Number(e.post_id)===Number(r)})),u=s[c],p=u.taxonomies;u.post_title=l,u.raw_title=l,u.post_status=o,u.author_markup=n.author_markup,u.date_markup=n.date_markup;var d=n.taxonomy_terms;for(var m in d)if(d.hasOwnProperty(m)){var f=d[m];p[m].terms=f}u.taxonomies=p,publishpressCalendarParams.PostData[c]=u,i.find(".publishpress-calendar-item-title").html(u.post_title),"function"==typeof a&&a(e)}t.removeClass("disabled"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";setTimeout((function(){var a="pp-floating-msg-"+Math.round((new Date).getTime()+100*Math.random()),n=jQuery(".pp-floating-status").length;jQuery("#wpbody-content").after('<span class="pp-floating-status pp-floating-status--'+e+" "+a+'">'+t+"</span>"),jQuery("."+a).css("bottom",45*n).fadeIn(1e3).delay(1e4).fadeOut(1e3,(function(){jQuery(this).remove()}))}),500)}(n.status,n.content)}))}(e,jQuery(this),we)})),e.userCanAddPosts&&xe(),be}),[]),React.useEffect((function(){ee(".publishpress-calendar-day-items li").draggable({zIndex:99999,helper:"clone",containment:".publishpress-calendar table",start:function(e,t){return ee(e.target).data("id")!==M&&!!ee(e.target).hasClass("publishpress-calendar-item-movable")&&(ee(e.target).addClass("ui-draggable-target"),Se(),void j(!0))},stop:function(e,t){ee(".ui-draggable-target").removeClass("ui-draggable-target"),j(!1)}}),ee(".publishpress-calendar tbody > tr > td").droppable({drop:ke,over:Ce})})),e.userCanAddPosts&&React.useEffect(xe,[o,m,T,I,oe,z]),React.useEffect((function(){_(!0),P(e.strings.loading);var t=pe(e.actionGetData,"");oe&&Object.keys(oe).length>0&&(oe.hasOwnProperty("start_date")&&delete oe.start_date,oe.hasOwnProperty("number_of_weeks")&&delete oe.number_of_weeks,t+="&"+new URLSearchParams(oe).toString()),t+="&start_date="+d(p(o,e.weekStartsOnSunday))+"&number_of_weeks="+m,t+=I?"&s="+I:"&s=",fetch(t).then((function(e){return e.json()})).then((function(e){publishpressCalendarParams.PostData=b(publishpressCalendarParams.PostData,e),w(e),_(!1),P(null),ye(),jQuery(".pp-title-tooltip").each((function(){var e=jQuery(this),t=e.attr("title");if(t&&""!==t){e.removeAttr("title");var a=jQuery('<div class="pp-title-tooltip-text"></div>').text(t);jQuery("body").append(a),e.hover((function(){a.show();var t=e.offset().top-a.outerHeight()-10,n=e.offset().left+e.outerWidth()/2-a.outerWidth()/2;a.css({top:t+"px",left:n+"px",position:"absolute"})}),(function(){a.hide()}))}}))}))}),[o,m,T,I,oe,z]),React.useEffect((function(){if(M)if(publishpressCalendarParams.proActive)y(M);else{_(!0),P(e.strings.loadingItem);var t=e.ajaxUrl+"?action=publishpress_calendar_get_post_data&nonce="+e.nonce+"&id="+M;fetch(t).then((function(e){return e.json()})).then((function(e){_(!1),P(null),q(e)}))}}),[M,V]);var Ne=["publishpress-calendar","publishpress-calendar-theme-"+r];return e.userCanAddPosts&&Ne.push("user-can-add-posts"),React.createElement("div",{className:Ne.join(" ")},React.createElement(t,{refreshOnClickCallback:we,backPageOnClickCallback:function(e){e.preventDefault(),Ee(-1*m)},backOnClickCallback:function(e){e.preventDefault(),Ee(-1)},forwardOnClickCallback:function(e){e.preventDefault(),Ee(1)},forwardPageOnClickCallback:function(e){e.preventDefault(),Ee(m)},todayOnClickCallback:function(t){t.preventDefault(),c(p(e.todayDate,e.weekStartsOnSunday))},strings:e.strings}),React.createElement("table",null,React.createElement("thead",null,React.createElement("tr",null,React.createElement(a,{weekStartsOnSunday:e.weekStartsOnSunday,strings:e.strings}))),React.createElement("tbody",null,function(){for(var t,a,n=7*m,r=p(o,e.weekStartsOnSunday),l=[],s=[],i=0,c=r.getMonth(),u=0;u<n;u++)0===i&&(s=[]),(t=new Date(r)).setDate(t.getDate()+u),a=d(t),s.push(React.createElement(G,{key:"day-"+t.getTime(),date:t,shouldDisplayMonthName:c!==t.getMonth()||0===u,todayDate:e.todayDate,isLoading:!1,isHovering:!x&&ae&&ae.getTime()===t.getTime()&&!le,items:v[a]||[],maxVisibleItems:parseInt(e.maxVisibleItems),timeFormat:e.timeFormat,openedItemId:M,getOpenedItemDataCallback:Te,ajaxUrl:e.ajaxUrl,onClickItemCallback:De,onItemActionClickCallback:Pe,strings:e.strings})),7==++i&&(i=0,l.push(React.createElement("tr",{key:"calendar-row-".concat(l.length)},s))),c=t.getMonth();return l}())),le&&React.createElement(B,{date:le,ajaxUrl:e.ajaxUrl,dateFormat:e.dateFormat,postTypes:e.postTypesCanCreate,statuses:e.statuses,actionGetPostTypeFields:e.actionGetPostTypeFields,nonce:e.nonce,onCloseCallback:function(){Z(z+1),se(null)},allowAddingMultipleAuthors:e.allowAddingMultipleAuthors,strings:e.strings}),React.createElement(n,{showSpinner:C,message:D}))}const ae=wp.element,ne=ReactDOM;jQuery((function(){var e=document.getElementById("publishpress-calendar-wrap");publishpressCalendarParams.PostData=b([],publishpressCalendarParams.items);var t,a,n,r=React.createElement(te,{firstDateToDisplay:(t=publishpressCalendarParams.firstDateToDisplay,a=new Date(t),n=6e4*a.getTimezoneOffset(),new Date(a.getTime()+n)),weekStartsOnSunday:1===parseInt(publishpressCalendarParams.weekStartsOnSunday),numberOfWeeksToDisplay:publishpressCalendarParams.numberOfWeeksToDisplay,todayDate:g(publishpressCalendarParams.todayDate),dateFormat:publishpressCalendarParams.dateFormat,timeFormat:publishpressCalendarParams.timeFormat,theme:publishpressCalendarParams.theme,statusesToDisplayTime:publishpressCalendarParams.statusesToDisplayTime,maxVisibleItems:publishpressCalendarParams.maxVisibleItems,ajaxUrl:publishpressCalendarParams.ajaxUrl,actionGetData:"publishpress_calendar_get_data",actionMoveItem:"publishpress_calendar_move_item",actionGetPostTypeFields:"publishpress_calendar_get_post_type_fields",nonce:publishpressCalendarParams.nonce,statuses:publishpressCalendarParams.statuses,postTypes:publishpressCalendarParams.postTypes,postTypesCanCreate:publishpressCalendarParams.postTypesCanCreate,userCanAddPosts:publishpressCalendarParams.userCanAddPosts,items:publishpressCalendarParams.items,allowAddingMultipleAuthors:publishpressCalendarParams.allowAddingMultipleAuthors,requestFilter:publishpressCalendarParams.requestFilter,strings:publishpressCalendarParams.strings});ae.createRoot?(0,ae.createRoot)(e).render(r):(0,ne.render)(r,e)}))})();